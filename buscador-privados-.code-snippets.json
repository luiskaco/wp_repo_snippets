{"generator":"Code Snippets v3.3.0","date_created":"2023-03-15 22:03","snippets":[{"name":"BUSCADOR PRIVADOS ","desc":"Codigo de buscador\n\n&nbsp;","tags":["sample","media"],"scope":"global","code":"add_action( 'wp_footer', function () {\nif(is_page(['home','partii'])):\n?>\n<script>\n\n        (function($){\n            const departamento_select =\"departamento\";\n            const provincia_select = \"provincia\";\n            const distrito_select = \"distrito\";\n            const establecimiento_select = \"establecimiento\";\n    \n            const section_info =\"sectionInfo_id\";\n            let source_data_ecuador;\n    \n\t\t\tfetch('http:\/\/localhost\/wpSolQueAyuda\/wp-content\/uploads\/2023\/02\/data02022023.json')\n                .then(response => response.json())\n                .catch(error => console.error('Error:', error))\n                .then((data)=>{\n                    source_data_ecuador = data;\n                    \/\/ Cargando dinamicamente\n                    add_sort_option(source_data_ecuador,'departamento',`#${departamento_select}`);\n            }); \n\t\t\t\n\n\t\t\t\n\t\t\t\n    $(() => {\n    \n        $(`#${departamento_select}`).change(e => {\n          \/\/  console.log(e.target.value);\n            const data_province_filter = source_data_ecuador.filter( data_ecuador => ( data_ecuador.departamento.split(\" \").join(\"\")  === e.target.value));\n    \n            input_empty(`#${provincia_select}`);\n            add_option_select(`#${provincia_select}`);\n            \n            input_empty(`#${distrito_select}`);\n            add_option_select(`#${distrito_select}`);\n            \n            input_empty(`#${establecimiento_select}`);\n            add_option_select(`#${establecimiento_select}`);\n    \n            add_sort_option(data_province_filter,'provincia',`#${provincia_select}`);\n        });\n    \n        $(`#${provincia_select}`).change(e => {\n            const data_provincia_filter = source_data_ecuador.filter( data_ecuador => ( data_ecuador.provincia === e.target.value));\n            input_empty(`#${distrito_select}`);\n            add_option_select(`#${distrito_select}`);\n            \n            input_empty(`#${establecimiento_select}`);\n            add_option_select(`#${establecimiento_select}`);\n            \n            add_sort_option(data_provincia_filter,'distrito',`#${distrito_select}`);\n        });\n    \n        $(`#${distrito_select}`).change(e => {\n            const data_establecimiento_filter = source_data_ecuador.filter( data_ecuador => ( data_ecuador.distrito.split(\" \").join(\"\") === e.target.value));\n     \n            input_empty(`#${establecimiento_select}`);\n            add_option_select(`#${establecimiento_select}`);\n            \n            add_sort_option(data_establecimiento_filter,'institucion',`#${establecimiento_select}`);\n        });\n    \n    \n        $(`#${establecimiento_select}`).change(e => {\n             \/\/console.log(e.target.value);\n             \n             const data_filter = source_data_ecuador.filter(\n\t\t\t\t \n                 data_ecuador => ( \n                        data_ecuador.departamento ===  $(`#${departamento_select}`).val() &&\n                        data_ecuador.provincia.split(\" \").join(\"\") === $(`#${provincia_select}`).val() &&\n                        data_ecuador.distrito.split(\" \").join(\"\") === $(`#${distrito_select}`).val() &&\n                        data_ecuador.institucion.split(\" \").join(\"\") === e.target.value       \n                     ));\n                \n            \n                 $(`#${section_info}`).attr(\"style\", \"display:block\")\n                \/\/  agregar\n    \n                if(TienePropiedad(data_filter[0], \"direccion\")){\n                    $(\"#address_id\").html(data_filter[0].direccion.toUpperCase().replace('\\r\\n', '  '))\n                }else{\n                    $(\"#address_id\").html(\"No disponible\");\n                }\n    \n                if(TienePropiedad(data_filter[0], \"telefono\")){\n                    $(\"#cellphone_id\").html(data_filter[0].telefono.toUpperCase().replace('\\r\\n', '  '))\n                }else{\n                    $(\"#cellphone_id\").html(\"No disponible\");\n                }\n    \n                if(TienePropiedad(data_filter[0], \"horario\")){\n                    $(\"#schedule_id\").html(data_filter[0].horario.toUpperCase().replace('\\r\\n', '  '))\n                }else{\n                    $(\"#schedule_id\").html(\"No disponible\");\n                }\n        \n    \n                console.log(data_filter[0])\n    \n         });\n    \n    });\n    \n        \/\/ Function\n        const add_sort_option = (data, dataJsonName, destiny, except = null ) =>{\n            let list_name = data.map(filterName =>(filterName[dataJsonName]));\n            let list_sorted = list_name.sort();\n            let data_unique = list_sorted .filter( (value, index) => {\n                return value !== list_sorted[index + 1];\n            });\n            \n            $.each( data_unique, ( index, value )=> {\n             \n                add_option(destiny,value.replace(\/ \/g, \"\"),value);\n            });\n        }\n            \n        const add_option = (destiny, index,value) =>{\n            $(destiny).append('<option value='+index+'>'+ value.toUpperCase()+' <\/option>' );\n        }; \/\/.toUpperCase()\n    \n        const add_option_select = (destiny) =>{\n            $(destiny).prepend('<option value=\"\" selected>SELECIONAR<\/option>');\n        };\n    \n        const input_disable = (value,boleano) => {\n            $(value).prop('disabled', boleano);\n        };\n    \n        const input_empty = (destiny) => {\n            $(destiny).empty();\n        };\n    \n        const TienePropiedad = (objeto, propiedad) => {\n            return typeof objeto !== 'undefined' && objeto.hasOwnProperty(propiedad);\n          }\n       })(jQuery);\n\n<\/script>\n<?php \nendif;\n} );","priority":"10"}]}